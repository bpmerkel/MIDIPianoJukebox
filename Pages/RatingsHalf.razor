<MudIconButton Icon="@doGetIcon(1f)" OnClick="@((_) => doSetRating(1f))" />
<MudIconButton Icon="@doGetIcon(2f)" OnClick="@((_) => doSetRating(2f))" />
<MudIconButton Icon="@doGetIcon(3f)" OnClick="@((_) => doSetRating(3f))" />
<MudIconButton Icon="@doGetIcon(4f)" OnClick="@((_) => doSetRating(4f))" />
<MudIconButton Icon="@doGetIcon(5f)" OnClick="@((_) => doSetRating(5f))" />

@code {
    [Parameter] public float Rating { get; set; }
    [Parameter] public EventCallback<float> RatingChanged { get; set; }

    protected string doGetIcon(float rating)
    {
        //var min = rating - 1f;
        var mid = rating - .5f;
        var max = rating;
        if (Rating >= max) return Icons.Material.Filled.Star;
        if (Rating >= mid) return Icons.Material.Filled.StarHalf;
        //if (Rating >= min) return Icons.Material.Filled.Star_border;
        return Icons.Material.Filled.StarBorder;
    }

    // perform a toggle-like action when user clicks a star already enabled
    protected async Task doSetRating(float rating)
    {
        var min = rating - 1f;
        var mid = rating - .5f;
        var max = rating;
        if (Rating >= min && Rating <= max)
        {
            // in button range
            if (Rating == min) Rating = max;
            else if (Rating == mid) Rating = min;
            else if (Rating == max) Rating = mid;
        }
        else
        {
            Rating = max;
        }
        await RatingChanged.InvokeAsync(Rating);
    }
}
